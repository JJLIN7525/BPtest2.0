<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gambling Personality Test</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background-color: #121212;
      color: #f1f1f1;
      margin: 0;
      padding: 20px;
    }

    .question-block {
      margin-bottom: 20px;
      background-color: #1e1e1e;
      padding: 15px;
      border-radius: 8px;
    }

    .question-block p {
      font-weight: bold;
    }

    label {
      display: block;
      margin: 5px 0;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    #submitBtn {
      margin-top: 20px;
      display: none;
    }

    #result {
      margin-top: 30px;
      background-color: #1e1e1e;
      padding: 20px;
      border-radius: 8px;
    }

    #progress {
      height: 20px;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    #progress-bar {
      height: 100%;
      background-color: #ffcc00;
      width: 0;
    }

    .action-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
    }

    .result-layout {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .result-images {
      flex: 1 1 40%;
    }

    .result-images img {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .result-description {
      flex: 1 1 50%;
    }

    .line-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #00c300;
      color: white;
      text-decoration: none;
      border-radius: 5px;
    }
  </style>
</head>

<body>
  <h1 style="text-align: center; margin-bottom: 20px;">你的賭徒人格是什麼？</h1>
  <form>
    <div id="progress">
      <div id="progress-bar"></div>
    </div>
    <div id="questions"></div>

    <button type="button" id="submitBtn" onclick="showResult()">查看測驗結果</button>
    <div class="navigation">
      <button type="button" onclick="prevPage()">上一頁</button>
      <button type="button" onclick="nextPage()">下一頁</button>
    </div>
    <div class="action-buttons">
      <button type="button" onclick="alert('已儲存結果')">儲存結果</button>
      <button type="button" onclick="alert('分享功能尚未建置')">分享測驗</button>
    </div>
    <div id="result"></div>
  </form>

  <script>
    let currentPage = 1;
    const totalPages = 4;
    const scores = { I: 0, M: 0, L: 0, R: 0, C: 0 };

   const questionsData = [
  {
    q: "你走進一個陌生環境時，第一件事會先？",
    options: [
      { text: "感覺一下現場氛圍，再決定怎麼行動", type: "C" },
      { text: "觀察別人怎麼做，從中找出盲點", type: "P" },
      { text: "找尋流程或規則，先建立操作框架", type: "T" },
      { text: "先衝一波，邊做邊修正", type: "E" },
      { text: "紀錄關鍵細節，方便後續分析", type: "I" }
    ]
  },
  {
    q: "面對突發狀況時，你通常會？",
    options: [
      { text: "跟著感覺走，直覺告訴我該怎麼辦", type: "M" },
      { text: "觀察他人反應，再判斷自己的做法", type: "P" },
      { text: "冷靜分析狀況，照著邏輯處理", type: "T" },
      { text: "快速做決定，先出手再觀察", type: "E" },
      { text: "把當下的資訊整理起來，再決定", type: "I" }
    ]
  },
  {
    q: "你在面對一項全新任務時，會傾向？",
    options: [
      { text: "靠經驗與直覺處理，先做再說", type: "C" },
      { text: "先看別人怎麼做，觀察找靈感", type: "P" },
      { text: "查資料、比對案例，擬定明確計畫", type: "L" },
      { text: "測試幾種方式，看反應再修正", type: "E" },
      { text: "整理需求與條件，建立自己的判斷模型", type: "I" }
    ]
  },
  {
    q: "你在選擇工具或資源時，會偏好？",
    options: [
      { text: "用順手、感覺對的就好", type: "C" },
      { text: "先看看別人都用什麼，有參考才安心", type: "P" },
      { text: "挑選穩定、有邏輯支撐的工具", type: "R" },
      { text: "會先試用幾種，實戰中感受差異", type: "E" },
      { text: "用數據評估效果，確認最合適的那個", type: "I" }
    ]
  },
  {
    q: "當你發現計畫不如預期時，你會？",
    options: [
      { text: "相信直覺轉向其他策略", type: "M" },
      { text: "看看別人是否也失敗，再調整方法", type: "P" },
      { text: "找出問題原因，依據邏輯修正計畫", type: "T" },
      { text: "快速嘗試替代方案，保持靈活彈性", type: "E" },
      { text: "檢查紀錄與數據，重建下一步方向", type: "I" }
    ]
  },
  {
    q: "你在團隊中最常扮演的角色是？",
    options: [
      { text: "氣氛觀察員，掌握情緒起伏與風向", type: "C" },
      { text: "橋樑與轉譯者，協助團隊理解差異", type: "P" },
      { text: "規則訂定者，確保事情有序推進", type: "T" },
      { text: "實戰急先鋒，負責踩雷與開路", type: "E" },
      { text: "資料統整者，提供決策與支援依據", type: "I" }
    ]
  },
  {
    q: "在做選擇時你最害怕的是？",
    options: [
      { text: "選了感覺對但實際錯誤的選項", type: "C" },
      { text: "與群體判斷落差太大", type: "P" },
      { text: "邏輯漏洞導致結果不穩", type: "R" },
      { text: "錯過最佳出手機會", type: "E" },
      { text: "資料不足，無法預測風險", type: "I" }
    ]
  },
  {
    q: "你覺得自己最擅長的能力是？",
    options: [
      { text: "直覺與當下判斷", type: "M" },
      { text: "觀察人性與環境互動", type: "P" },
      { text: "邏輯推理與規則制定", type: "T" },
      { text: "執行效率與靈活反應", type: "E" },
      { text: "資料收集與系統分析", type: "I" }
    ]
  },
  {
    q: "當你輸了一次，你會先？",
    options: [
      { text: "安靜下來反思整體流程", type: "C" },
      { text: "找朋友聊聊狀況與可能的盲點", type: "P" },
      { text: "重新建立推理邏輯與策略步驟", type: "L" },
      { text: "馬上換下一招，不被情緒困住", type: "E" },
      { text: "檢查紀錄，釐清哪個環節出錯", type: "I" }
    ]
  },
  {
    q: "你在接受新資訊時，最在意的是？",
    options: [
      { text: "是否引起內心的情感共鳴", type: "C" },
      { text: "這資訊是不是多數人都接受的", type: "P" },
      { text: "它背後有沒有邏輯基礎與證據", type: "T" },
      { text: "是否可以馬上實踐應用", type: "R" },
      { text: "能否整合進原有的知識體系中", type: "I" }
    ]
  },
  {
    q: "朋友向你尋求建議時，你傾向怎麼做？",
    options: [
      { text: "根據直覺提供建議", type: "M" },
      { text: "詢問更多背景，分析對方處境", type: "I" },
      { text: "問其他人的意見後綜合判斷", type: "P" },
      { text: "先分析可能路徑與風險", type: "T" },
      { text: "提供實際可執行的方法給對方", type: "E" }
    ]
  },
  {
    q: "遇到不熟的人，你通常會？",
    options: [
      { text: "先觀察對方風格與習性", type: "P" },
      { text: "快速破冰，進行試探性互動", type: "E" },
      { text: "保持距離，先分析情境是否安全", type: "T" },
      { text: "內建雷達判斷這人能不能信任", type: "M" },
      { text: "紀錄細節，後續觀察再進一步", type: "I" }
    ]
  },
  {
    q: "你認為影響決策最關鍵的因素是？",
    options: [
      { text: "情境當下的氛圍與感受", type: "C" },
      { text: "數據資料與過往經驗", type: "I" },
      { text: "群體反應與他人回饋", type: "P" },
      { text: "行動速度與反應彈性", type: "E" },
      { text: "整體邏輯與後續推演", type: "T" }
    ]
  },
  {
    q: "你覺得怎樣的失敗最難承受？",
    options: [
      { text: "直覺錯誤導致重大損失", type: "M" },
      { text: "資料都對但還是失敗", type: "I" },
      { text: "跟多數人判斷一致卻做錯", type: "P" },
      { text: "明知風險卻還是踩下去", type: "E" },
      { text: "所有邏輯都對仍無法成功", type: "T" }
    ]
  },
  {
    q: "遇到需要立刻回應的緊急狀況，你？",
    options: [
      { text: "直覺式反應，靠本能行動", type: "M" },
      { text: "依照以往經驗套用類似處理模式", type: "I" },
      { text: "快速評估風險後出手", type: "T" },
      { text: "先下手為強，再觀察結果", type: "E" },
      { text: "看看現場其他人怎麼做", type: "P" }
    ]
  },
  {
    q: "你會如何規劃長期計畫？",
    options: [
      { text: "憑感覺抓大方向，邊走邊修正", type: "C" },
      { text: "列出清單與時間點，逐項執行", type: "L" },
      { text: "參考他人案例與建議作為架構", type: "P" },
      { text: "用推論找出最高效率流程", type: "T" },
      { text: "根據數據持續優化方案", type: "I" }
    ]
  },
  {
    q: "當他人否定你的想法時，你？",
    options: [
      { text: "先看看他說的是否有邏輯", type: "T" },
      { text: "尊重但堅持自己感覺", type: "M" },
      { text: "找其他人再詢問看看誰更有道理", type: "P" },
      { text: "馬上再測試一次證明自己沒錯", type: "E" },
      { text: "列出資料支撐自己的立場", type: "I" }
    ]
  },
  {
    q: "別人會怎麼形容你的思考風格？",
    options: [
      { text: "跳脫框架，擅長找出奇異點", type: "M" },
      { text: "紮實穩定，數據導向分析型", type: "I" },
      { text: "協調與橋樑者，善於換位思考", type: "P" },
      { text: "行動派，能抓時機果斷決策", type: "E" },
      { text: "邏輯嚴密，習慣拆解系統結構", type: "T" }
    ]
  },
  {
    q: "你通常如何做出重要決定？",
    options: [
      { text: "根據當下感受與過往經驗", type: "C" },
      { text: "收集所有相關資訊再推斷", type: "I" },
      { text: "詢問信任對象的建議", type: "P" },
      { text: "評估每個選項的邏輯鏈結", type: "T" },
      { text: "看有沒有實戰證據佐證決策", type: "E" }
    ]
  }
];
    const prefix = "/BPtest2.0/images/";
    const resultMap = {
      IMC: { name: "感應牌王（IPRC）", img: ["/BPtest2.0/images/IMC1.jpg", "/BPtest2.0/images/IMC2.jpg"], desc: "你是「感應牌王」，仰賴直覺作戰，擅長察覺場面節奏與微妙變化，下注憑感覺、選局看氛圍，是天生的牌桌感應者。你不屬於公式玩家，反而擅長在混沌中尋找靈感。但若碰上冷盤、陷入連敗，過度憑感覺反而會讓你誤判。建議搭配簡單規則提升穩定性，善用工具進行感知驗證，將有助於勝率提升。你時常能在第一時間感受到牌局的節奏變化，像是身體本能地讀懂了場上的氛圍與脈絡。這讓你在瞬間決策上具備極大優勢，尤其在快節奏或龍短亂跳的局勢中，能迅速切入找出進攻空隙。不過你的弱點也來自於過度信任感覺，當連敗打擊信心、或盤路異常時，容易陷入自我懷疑與判斷混亂。感應型玩家適合搭配簡化版走勢紀錄，設定預警點來提醒自己是否進入「情緒下注模式」。此外，你在團體下注環境中容易受他人情緒影響，建議獨立作戰或使用模擬練習保持節奏穩定。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。根據目前測驗結果，這類型玩家約佔總人數的 21%。" },
      IMR: { name: "反指預言家（EPLC）", img: ["/BPtest2.0/images/IMR1.jpg", "/BPtest2.0/images/IMR2.jpg"], desc: "你是「反指預言家」，擅長從群體錯誤中找到破綻，常在眾人下注時反向進場。你具備強烈懷疑精神，認為越熱的牌越該閃避，是極具反骨的局勢顛覆者。你的下注風格冒險、反市場邏輯，適合短打與轉折點布局。若能結合牌路數據與人性推理，將具備極高破局力。你觀察力敏銳，擅長解讀群體心理與熱門路線的失衡點，常在眾人看好某一方時悄悄布局反向進場。對你來說，「過熱即風險」是根深蒂固的信念，也讓你在多數人失利時反而取得優勢。然而這種風格風險也高，若盲目反指容易錯失主趨勢或掉入自我反駁陷阱。你適合在牌局混沌不明、或連開態勢被炒熱時出手，並搭配簡易數據檢核來強化進場依據。你也擅長從論壇、聊天室與開局節奏中判斷市場情緒，並選擇在風向一致時逆流下注，是賭場中的逆行者。若能結合模擬推演與平台歷史補分節奏，將讓你的反指操作更加精準，成為真正的預言者。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。請記住：真正的高手，並不是一味追求勝場，而是懂得避開錯局、穩守每一次押注背後的風險控制。根據目前測驗結果，這類型玩家約佔總人數的 11%。" },
      ILC: { name: "走勢裁決官（IMRT）", img: ["/BPtest2.0/images/ILC1.jpg", "/BPtest2.0/images/ILC2.jpg"], desc: "你是「走勢裁決官」，重視連莊與跳躍、靈感與數據交錯並重。你會觀察每局變化節奏、判斷最佳進退點，是擅長順勢操作的技巧型玩家。你信奉“見好就收”，也敢於重壓長龍，是屬於紀律與直覺兼備的穩健選手。建議進一步強化風控紀律，可避免連輸時的追壓誤區。你深信走勢即邏輯，是在亂中取勢、在動中找靜的高手。你的操作風格不躁進也不拖延，能根據龍的起伏與牌型切換做出動態調整，擁有近乎「實戰雷達」的直覺力。你擅長觀察連續莊閒與間斷跳局的結構，透過趨勢轉折時判斷時機果斷進場，是賭桌上少數能掌握風向與節奏的玩家。你對冷熱盤有相當敏銳度，但仍需避免情緒追壓。建議搭配簡易統計表或落地記錄系統，進一步建立屬於自己的風控界線與退場點，才能讓穩健與進攻取得完美平衡，成為真正的裁決官。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。請記住：真正的高手，並不是一味追求勝場，而是懂得避開錯局、穩守每一次押注背後的風險控制。走勢裁決官常常是團隊中的核心決策者，你不只是下注者，更是節奏的調控者。根據目前測驗結果，這類型玩家約佔總人數的 13%。" },
      ILR: { name: "數據殺局者（IMLC）", img: ["/BPtest2.0/images/ILR1.jpg", "/BPtest2.0/images/ILR2.jpg"], desc: "你是「數據殺局者」，下注前總是先分析牌路、勝率與風險比，是理性至上的計算型博弈者。你重視紀錄、規律與驗證，經常以回測檢驗策略，追求穩定長期收益。若能融入更多動態指標，如補分異動、平台出分時段，你的分析準確率將再度升級。你習慣用回測與交叉比對來驗證每一種下注策略，無論是牌路類型、莊閒比例、或補分時段，你總是先分析後進場，不輕易讓情緒干擾邏輯判斷。你是少數會自建紀錄表、甚至使用 Excel 或 AI 協助分析的玩家，在你眼中每一場局勢都是一種統計樣本。你適合長期操作與數據驗證，逐步建立自己的贏錢模型。若能同步整合多平台出分節奏與莊閒開局趨勢，你的實戰勝率將能大幅提升。但也要注意過度依賴數字可能會忽略牌桌的真實波動與人性面，建議保留一定彈性與盤感，讓理性與直覺形成互補。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。請記住：真正的高手，並不是一味追求勝場，而是懂得避開錯局、穩守每一次押注背後的風險控制。根據目前測驗結果，這類型玩家約佔總人數的 12.5%。" },
      EMC: { name: "連爆之王（EPRT）", img: ["/BPtest2.0/images/EMC1.jpg", "/BPtest2.0/images/EMC2.jpg"], desc: "你是「連爆之王」，擅長鎖定節奏與情緒高點，一波帶走對手。你喜歡熱局、喜歡連勝，講求場感與賭感融合，是天生的激情操盤手。你的優勢是出手果斷、反應敏銳，但也容易在敗勢時因不服輸而重壓。若能學會在爆發與冷靜間切換節奏，將成為極具威脅力的戰士。你是高爆發型選手，出手快狠準，專挑機會連壓猛攻，是牌桌上的戰士與推進者。每當場上出現你熟悉的節奏與牌感，你能毫不猶豫全力衝刺，形成一波強勢爆擊。然而你也容易在失利時進入「情緒硬壓」的狀態，將原本的節奏打亂。這樣的反應力與風格讓你在連勝時像股龍捲風，但若缺乏節制，也可能在一波連敗中爆倉。你適合在大局明朗、氣氛拉滿的時候強勢出擊，擔任進攻箭頭角色。建議你設定冷靜停損點與限次重壓策略，將爆發期與休息期做明確切換，讓你不只是爆發王，更是能控制火力的操盤手。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。請記住：真正的高手，不只是熱血，也懂得保留後手、切換節奏。根據目前測驗結果，這類型玩家約佔總人數的 12%，屬於常見但極具爆發潛力的類型。" },
      EMR: { name: "機台解碼者（EMLC）", img: ["/BPtest2.0/images/EMR1.jpg", "/BPtest2.0/images/EMR2.jpg"], desc: "你是「機台解碼者」，偏好研究機率規律、補分節奏與動畫細節，是電子機率型玩法的深度玩家。你會觀察畫面變化、分析平台出分邏輯，適合多機台輪流試打、尋找補分異常點。若能善用腳本偵測、平台AI提示，你將能大幅提升命中精準度，成為破解者中的佼佼者。你擁有強烈的機台敏銳度，能從動畫變化、掉圖機率與平台刷新節奏中讀出潛在出分邏輯。不論是水果機、老虎機還是特色電子機種，你都能迅速辨別哪些是目前進入補分期、哪些則處於冷卻階段。你會筆記機台演算法變化、觀察平台活動前後出分頻率變化，甚至比對不同帳號的補分表現。若能結合AI輔助判斷與自動化監控模組，你的命中精度將進入另一層次。你是那種會一邊記錄機台畫面出圖邏輯，一邊比對同時段不同機率走勢的玩家，這讓你在平台電子遊戲中具備「工程師型直覺」。建議加強腳本判讀與跨平台分析能力，將讓你在電子領域建立屬於自己的破解系統。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。請記住：真正的高手，並不是一味追求勝場，而是懂得避開錯局、穩守每一次押注背後的風險控制。根據目前測驗結果，這類型玩家約佔總人數的 14%，屬於中度稀有但技術含量極高的玩家分布。" },
      ELC: { name: "機率駭客（IMLT）", img: ["/BPtest2.0/images/ELC1.jpg", "/BPtest2.0/images/ELC2.jpg"], desc: "你是「機率駭客」，擅長運用統計、建模與策略演算法對抗隨機性，是理工腦博弈代表。你喜歡分析投注紀錄，甚至將下注過程模擬為計算模型。你的優勢是邏輯嚴密、不被情緒左右，但若過度依賴理論，可能錯過直覺帶來的轉機。你具備編碼者的心態，喜歡解構所有變數與概率，對於『隨機性』這件事，你相信其中蘊藏可預測的秩序。你常自建數據模型、使用模擬系統，甚至評估不同策略下的期望值與風險係數。若能與AI結合進行即時計算與策略優化，你將如同量化交易者般，在混亂博弈中建立穩定收益模型。你是那種能看懂策略曲線、用變異數計算波動風險、甚至寫出模擬程式的人。這讓你在系統博弈中具備極高的理性穿透力，也使你更能辨別那些「看起來贏很多」但其實長期負期望值的打法。建議避免過度執著理論推演，保留臨場應變空間與情境直覺，讓你在理性與混沌間維持最佳節奏。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。無論是在高壓局勢中果斷出手，或是於盤整期中保持觀望，你都擁有與眾不同的節奏判斷能力。根據目前測驗結果，這類型玩家約佔總人數的 8%，是稀有度極高、但勝率極穩的系統型玩家。" },
      ELR: { name: "補分流氓（EPRC）", img: ["/BPtest2.0/images/ELR1.jpg", "/BPtest2.0/images/ELR2.jpg"], desc: "你是「補分流氓」，總能發現冷門時段與平台異常補倉時刻，擅長抓準系統漏洞逆襲反打。你會迴避熱門時間、關注閒時出分率，是屬於專打補倉期與反轉點的技巧型玩家。你擅長潛伏，總能在無人注意的冷門時段出手，並靠敏銳觀察力捕捉平台補倉異動。你對異常波動、突發掉分與熱門時間後的冷場特別敏感，常常能避開主流熱潮，悄悄完成逆襲。你是那種凌晨三點還在盯平台變化的人，深信「市場熱就代表風險大，平台冷才是補分機會」。若能同步監控多平台補分趨勢與排程演算法，甚至模擬不同帳號的出分反應，你將具備系統性掠金能力。你懂得避開風頭、斜著入場、以退為進，是博弈世界裡的邊緣型獵人。建議搭配日誌紀錄工具與AI即時偵測系統，將你的「感覺」轉為「數據優勢」。在操作風格上，你會傾向採取階段式策略與實戰驗證，並在面對不確定因素時保持靈活調整，這讓你不只是依賴個人風格，更是一名會觀察全局、因應變化的博弈參與者。此類型玩家若能進一步結合大數據回測或團隊模擬實驗，將能在既有優勢上疊加更多勝率因子。根據目前測驗結果，這類型玩家約佔總人數的 11%，屬於深夜行動派與反向策略愛好者的代表。

" }
      let userAnswers = []; // 測驗完成後將使用者的選項對應類型推入這個陣列

function calculateScores(answers) {
  const scoreMap = { I: 0, E: 0, P: 0, M: 0, L: 0, C: 0, R: 0, T: 0 };
  answers.forEach(type => {
    if (scoreMap[type] !== undefined) {
      scoreMap[type]++;
    }
  });
  return scoreMap;
}

function generateUserCode(scoreMap) {
  const sorted = Object.entries(scoreMap)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 4)
    .map(entry => entry[0]);
  return sorted.join('');
}

const personalityMap = {
  'EPRC': '補分流氓',
  'EMLC': '機台解碼者',
  'EPRT': '連爆之王',
  'EPLC': '反指預言家',
  'IMLT': '機率駭客',
  'IMLC': '數據殺局者',
  'IMRT': '走勢裁決官',
  'IPRC': '感應牌王'
};

function matchToClosestPersonality(code) {
  for (const key in personalityMap) {
    if (code.slice(0, 3) === key.slice(0, 3)) return key;
  }
  for (const key in personalityMap) {
    const matches = key.split('').filter(c => code.includes(c)).length;
    if (matches >= 2) return key;
  }
  for (const key in personalityMap) {
    if (key.split('').some(c => code.includes(c))) return key;
  }
  return 'IMRC';
}

function showResult() {
  const result = getFinalPersonalityCode(userAnswers);
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = `
    <h2>你的人格代碼是：${result.matchedCode}</h2>
    <p>對應人格類型：<strong>${result.personality}</strong></p>
    <p>原始代碼（未分類）：${result.rawCode}</p>
  `;
}
